!function(t,s,e){function r(s,e){this.element=s,this.options=t.extend({},n,e),this._defaults=n,this._name=i,this.init()}var i="myFormSubmit",n=(s.document,{before:null,callback:null,data:{},dataType:null,errorsDiv:"#errors",event:"submit",method:"GET",resetForm:!0,resultsDiv:"#results",url:null});r.prototype={init:function(){var s=this;t(this.element).on(this.options.event,function(t){"function"==typeof s.options.before&&s.before(),t.preventDefault(),s._setUrlProp(),s._setMethodProp(),s._setDataProp(),s._setDivs(),s.getResults(s.getData()).then(function(t){console.log(t),"function"==typeof s.options.callback&&s.callback()})})},_setDivs:function(){var s=t(this.element),e=t("div#errors").first().length,r=t("div#results").first().length;0==e&&s.before('<div class="row"><div class="col-sm-12" id="errors"></div></div>'),0==r&&s.after('<hr><div class="row"><div class="col-sm-12" id="results"></div></div>')},_setUrlProp:function(){var s=this.options.url;return s?this.options.url=s:this.options.url=t(this.element).prop("action")},_setMethodProp:function(){return this.options.method=t(this.element).prop("method")},_setDataProp:function(){return this.options.data=t(this.element).serializeArray()},getData:function(){var s=this.options;return t.ajax({url:s.url,type:s.method,dataType:s.dataType,data:s.data})},getResults:function(s){var e=this;return this.options.resetForm&&t(this.element)[0].reset(),s.success(function(t){e.handleSuccess(t)}).error(function(t){var s=t.status,r=e.parseErrorsObjet(t);422==s&&e.displayValidationErrors(r),404==s&&e.displayValidationErrors(r)})},clearErrorsDiv:function(){return t(this.options.errorsDiv).html("")},handleSuccess:function(t){return this.clearErrorsDiv(),this.showHtmlSuccess(t)},showHtmlSuccess:function(s){return t(this.options.resultsDiv).html(s)},parseErrorsObjet:function(s){if(s.responseJson!=e)return s.responseJson;if(s.responseText!=e)try{return t.parseJSON(s.responseText)}catch(r){return{response:s.statusText}}},displayValidationErrors:function(s){var e='<div class="col-sm-12">';return e+='<div class="alert alert-danger">',e+='<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>',e+="<strong>Craps! </strong>",e+="<ul>",t.each(s,function(t,s){e+="<li>",e+=s,e+="</li>"}),e+="</ul>",e+="</div>",e+="</div>",t(this.options.errorsDiv).html(e)},before:function(){return this.options.before.call(this)},callback:function(){return this.options.callback.call(this)}},t.fn[i]=function(s){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new r(this,s))})}}(jQuery,window);