"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[42],{4486:(t,n,i)=>{function o(t,n,i,o,a,s,e,c){var r,l="function"==typeof t?t.options:t;if(n&&(l.render=n,l.staticRenderFns=i,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),e?(r=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(e)},l._ssrRegister=r):a&&(r=c?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),r)if(l.functional){l._injectStyles=r;var f=l.render;l.render=function(t,n){return r.call(n),f(t,n)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,r):[r]}return{exports:t,options:l}}i.d(n,{A:()=>o})},8467:(t,n,i)=>{i.r(n),i.d(n,{default:()=>a});const o={data:function(){return{notificationsData:this.notifications,notification:{},notificationsCount:0,moment:window.moment}},props:{notifications:{type:Array,required:!0},user_id:{type:Number,required:!0},count:{type:Number,required:!0}},mounted:function(){var t=this;this.notificationsCount=this.count,window.Echo.private("App.User.".concat(this.user_id)).listen("UserAppNotificationSent",(function(n){t.notificationsData.unshift(n.notification),t.notificationsCount--}))},methods:{parseClass:function(t){var n=t.data?t.data.css_class:"bg-gray";return String(n).search("bg-")>=0?n:"bg-".concat(n)},showModal:function(t){this.$modal.show("notifications-modal",t)},closeModal:function(){this.$modal.hide("notifications-modal")},beforeOpen:function(t){var n=this,i=t.params;this.notification=i,this.notification.type=i.type,axios.get("/api/notifications/show/".concat(i.id)).then((function(t){n.notificationsCount--,n.notificationsData=n.notificationsData.filter((function(t){return t.id!=i.id}))}))},markAllAsRead:function(){var t=this;this.$swal({type:"warning",title:"Confirm",text:"Are you sure you want to mark them all as read? By proceeding all notifications will disapear!",confirmButtonText:'<i class="fa fa-edit"></i> Confirm',confirmButtonClass:"btn btn-warning"}).then((function(n){n.value&&axios.post("/api/notifications/mark-all-as-read").then((function(n){t.notificationsData=n.data,t.notificationsCount=t.notificationsCount<25?0:t.notificationsCount-25}))}))},fetchUnreadNotifications:function(){var t=this;axios.get("/api/notifications/unread").then((function(n){return t.notificationsData=n.data}))}}};const a=(0,i(4486).A)(o,(function(){var t=this,n=t._self._c;return n("li",{staticClass:"dropdown notifications-menu"},[n("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[n("i",{staticClass:"fa fa-bell-o"}),t._v(" "),n("span",{staticClass:"label",class:[t.notificationsCount>0?"label-info":"bg-gray"]},[t._v("\n      "+t._s(t.notificationsCount)+"\n    ")])]),t._v(" "),n("ul",{staticClass:"dropdown-menu"},[n("li",{staticClass:"header"},[t._v("\n      You have "+t._s(t.notificationsCount)+" new notifications\n      ")]),t._v(" "),n("li",[n("ul",{staticClass:"menu"},t._l(t.notificationsData,(function(i){return n("li",{key:i.id,class:t.parseClass(i)},[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.showModal(i)}}},[n("i",{staticClass:"fa fa-bell-o text-aqua"}),t._v(t._s(i.data?i.data.subject:"No Subject")+"\n          ")])])})),0)]),t._v(" "),t.notificationsCount>0?n("a",{staticClass:"btn btn-danger form-control",attrs:{href:"#",title:"All notifications will be marked as read!"},on:{click:function(n){return n.preventDefault(),t.markAllAsRead.apply(null,arguments)}}},[t._v("\n      Mark All as Read\n    ")]):t._e()]),t._v(" "),n("modal",{attrs:{name:"notifications-modal",height:"auto",scrollable:!0},on:{"before-open":t.beforeOpen}},[n("div",{staticClass:"box box-solid"},[n("div",{staticClass:"box-header with-border"},[n("h4",[t._v("\n          "+t._s(t.notification.data?t.notification.data.subject:"No Subject")+"\n          "),n("a",{staticClass:"btn btn-link pull-right",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.closeModal.apply(null,arguments)}}},[t._v("\n            X\n          ")])])]),t._v(" "),n("div",{staticClass:"box-body"},[t.notification.data&&t.notification.data.body?n("p",[t._v("\n          "+t._s(t.notification.data.body)+"\n        ")]):n("pre",[t._v(t._s(t.notification)+" ")])]),t._v(" "),n("div",{staticClass:"box-footer"},[t._v("\n        Notification type: "+t._s(t.notification.type)+", @\n        "+t._s(t.moment(t.notification.created_at).format("Y-MM-DD H:mm:ss"))+"\n      ")])])])],1)}),[],!1,null,"2ece3d22",null).exports}}]);